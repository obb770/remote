<!DOCTYPE html>
<html>
 <head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0,
    maximum-scale=2.0, user-scalable=yes" />
  <style type="text/css">
body {
    text-align: center;
}
  </style>
 </head>
 <body>
  <div>
   <select id="list">
   </select>
  </div>
  <div>
   <button id="pauseorresume">P/R</button>
  </div>
  <div id="error">
  </div>
  <script type="text/javascript">
(function () {
'use strict';
var qs = function (q) {return document.querySelector(q);},
    request,
    populateList,
    playing = false,
    dummy;

function request(op, args) {
    var xhr = new XMLHttpRequest(),
        url = op,
        key,
        params = [];
    for (key in args) {
        if (args.hasOwnProperty(key)) {
            params.push(key + '=' + encodeURIComponent(args[key]));
        }
    }
    url = url + '?' + params.join('&');
    qs('#error').innerHTML = '';
    xhr.open('GET', url, false);
    xhr.send();
    if (xhr.status != 200) {
        qs('#error').innerHTML = xhr.responseText;
        return null;
    }
    return JSON.parse(xhr.responseText);
};

populateList = function (listElement) {
    var list = request('/list', {});
    listElement.innerHTML =
        '<option>' + list.join('</option><option>') + '</option>';
};

populateList(qs('#list'));
qs('#pauseorresume').addEventListener('click', function () {
    var list = qs('#list');
    if (playing) {
        request('/control', {'command': 'pauseOrResume'});
        return;
    }
    request('/play', {'file': list.options[list.selectedIndex].textContent});
    playing = true;
});

}());
  </script>
 </body>
</html>
